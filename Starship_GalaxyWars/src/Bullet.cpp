#include "Bullet.h"
#include <avr/pgmspace.h>

// 'enemy_bullet', 2x4px
const uint16_t texture_enemy_bullet [] PROGMEM = {
	0xffff, 0xffff, 0xffff, 0xffff, 0xe8e4, 0xe8e4, 0xe8e4, 0xe8e4
};

// 'player_bullet', 2x4px
const uint16_t texture_player_bullet [] PROGMEM = 
{
	0xfec0, 0xfec0, 0xfec0, 0xfec0, 0xfb40, 0xfb40, 0xfb40, 0xfb40
};

// 'player_nanoslice', 16x5px
const uint16_t texture_player_nanoslice [] PROGMEM = 
{
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 
	0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 0xb0, 0x1f, 0xb0, 0x1f, 0xb0, 0x1f, 
	0xb0, 0x1f, 0xb0, 0x1f, 0xb0, 0x1f, 0xf8, 0x1b, 0xf8, 0x1b, 0xf8, 0x1b, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0xf8, 0x1b, 0xf8, 0x1b, 0xb0, 0x1f, 0xb0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x1f, 0xb0, 0x1f, 0xf8, 0x1b, 0xf8, 0x1b, 0x00, 0x00, 
	0xf8, 0x1b, 0xb0, 0x1f, 0xb0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x1f, 0xb0, 0x1f, 0xf8, 0x1b, 
	0xb0, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xb0, 0x1f
};

Bullet::Bullet(BulletType type)
	: Entity()
{
	switch(type)
	{
		case BulletType_PlayerNormal:
			m_textureData = (uint8_t*)texture_player_bullet;
			m_textureDataSize = ArraySize(texture_player_bullet);
			m_width = 2;
			m_height = 4;
			m_textureFormat = TextureFormat_16Bit;
			break;
		case BulletType_PlayerNanoSlice:
			m_textureData = (uint8_t*)texture_player_nanoslice;
			m_textureDataSize = ArraySize(texture_player_nanoslice);
			m_width = 16;
			m_height = 5;
			m_textureFormat = TextureFormat_16Bit;
			break;
		case BulletType_EnemyNormal:
			m_textureData = (uint8_t*)texture_enemy_bullet;
			m_textureDataSize = ArraySize(texture_enemy_bullet);
			m_width = 2;
			m_height = 4;
			m_textureFormat = TextureFormat_16Bit;
			break;
	}

	m_bulletType = type;
}

BulletType Bullet::GetType()
{
	return m_bulletType;
}